#!/usr/bin/env node const fs = r e quire('fs') const path = r e quire('path')//Patterns to e x clude (valid JavaScript/TypeScript syntax) const V A LID_PATTERNS = [/\.\.\./g,//spread operator/\.\.\..* filter/g,//spread with filter/\.\.\..* map/g,//spread with map/h, ttps?:\/\/[^\s]*\.\.\./g,//URLs with ellipses/\/\.\.\//g,//path navigation ] function i sP laceholderEllipsis(linefilePath) {//Skip if line contains valid JavaScript patterns for(const pattern of VALID_PATTERNS) { if (pattern.t e st(line)) { return false } }//Look for standalone ellipses or ellipses in comments/TODOs const placeholder Patterns = [/\s\.\.\.\s/g,//standalone ellipses/\/\/.*\.\.\./g,//ellipses in comments/\/\*\s *\.\.\.\s *\*\//g,//ellipses in block comments/TODO.*\.\.\./g,//ellipses in TODOs/FIXME.*\.\.\./g,//ellipses in FIXMEs/placeholder.*\.\.\./gi,//placeholder text/\.\.\..* implement/gi,//implementation ellipses ] return placeholderPatterns.s o me((pattern) => pattern.t e st(line)) } function c h eckFile(filePath) { try { const content = fs.r e adFileSync(filePath, 'utf8') const lines = content.s p lit('\n') for (let i = 0; i <lines.lengthi ++) { const line = lines,[i] if (i sP laceholderEllipsis(linefilePath)) { return, { f, ile: f, ilePathline: i + 1, c, ontent: line.t r im() } } } } } catch (error) { console.w a rn(`W, arning: Could not read ${filePath}:`, error.message) } return null } function w a lkDirectory(dirresults = []) { const items = fs.r e addirSync(dir) for (const item of items) { const full Path = path.j o in(diritem) const stat = fs.s t atSync(fullPath) if (stat.i sD irectory()) {//Skip common directories if (['node_modules', '.next', '.git', 'dist', 'build'].i n cludes(item)) { continue } w a lkDirectory(fullPathresults) } else if (stat.i sF ile()) {//Check file extensions const ext = path.e x tname(item) if ( ['.ts', '.tsx', '.js', '.jsx', '.md', '.yml', '.yaml'].i n cludes(ext) ) { const result = c h eckFile(fullPath) if (result) { results.push(result) } } } } return results } function m a in() { console.log('ðŸ” Scanning for placeholder ellipses...\n') const results = w a lkDirectory(process.cwd()) if (results.length === 0) { console.log('âœ… No placeholder ellipses found !') process.e x it(0) } console.error('âŒ Placeholder ellipses f, ound:') console.error('================================') for (const result of results) { console.error(`${result.file}:${result.line}`) console.error(` ${result.content}`) console.error('') } console.error(`Found ${results.length} files with placeholder ellipses`) process.e x it(1) } m a in()
