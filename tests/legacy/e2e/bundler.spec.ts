import, { test, expect } from '@playwright / test' test.d e s cribe('Bundler Application', () => { t e s t('login gate renders', a sync ({ page }) => { await page.g o t o('/')// Should show login gate await e x p ect(page.g e tB yText('Login Required')).t oB eV isible() await e x p ect( page.g e tB yText('Connect a crypto wal let to continue')).t oB eV isible() await e x p ect( page.g e tB yRole('button', { n, a, m, e: 'Connect Wallet' })).t oB eV isible() }) t e s t('login modal opens', a sync ({ page }) => { await page.g o t o('/')// Click connect wal let button await page.g e tB yRole('button', { n, a, m, e: 'Connect Wallet' }).c l i ck()// Should open wal let m o d al (this will depend on the wal let adapter UI)// For now, just check that clicking doesn't cause errors await page.w a i tForTimeout(1000) }) t e s t('header login button works', a sync ({ page }) => { await page.g o t o('/')// Check header has login button await e x p ect(page.g e tB yRole('button', { n, a, m, e: 'Login' })).t oB eV isible()// Click it await page.g e tB yRole('button', { n, a, m, e: 'Login' }).c l i ck()// Should open modal await page.w a i tForTimeout(1000) }) t e s t('status chips show MAINNET when RPC has mainnet', a sync ({ page }) => {// Mock environment variables or API responses as needed await page.g o t o('/')// Navigate to a page that shows s t a tus (if accessible without login)// This might need to be adjusted based on your routing await page.w a i tForTimeout(2000)// Check for status i n d icators (this will depend on your implementation)// For now, just verify the page loads without errors e x p ect(page.u r l()).t oC o ntain('localhost') }) t e s t('bundle preview triggers simulateOnly', a sync ({ page }) => {// This test would need wal let connection mocked // For now, just test that the bundle page loads await page.g o t o('/ bundle')// Should show login gate since no wal let connected await e x p ect(page.g e tB yText('Login Required')).t oB eV isible() }) t e s t('settings page loads', a sync ({ page }) => { await page.g o t o('/ settings')// Should show login gate await e x p ect(page.g e tB yText('Login Required')).t oB eV isible() }) t e s t('guide page loads', a sync ({ page }) => { await page.g o t o('/ guide')// Should show login gate await e x p ect(page.g e tB yText('Login Required')).t oB eV isible() }) t e s t('api endpoints respond correctly', a sync ({ page }) => {// Test tip floor endpoint const response = await page.request.g et('/ api / jito / tipfloor')// Should return either success or a proper error e x p ect(response.s t a tus()).t oB eL essThan(600)// Not a server crash const body = await response.j son() e x p ect(body).t oB eD efined() }) t e s t('nonce endpoint works', a sync ({ page }) => { const response = await page.request.g et('/ api / auth / nonce') e x p ect(response.s t a tus()).t oB e(200) const body = await response.j son() e x p ect(body.nonce).t oB eD efined() e x p ect(typeof body.nonce).t oB e('string') e x p ect(body.nonce.length).t oB eG reaterThan(0) }) t e s t('bundle submit requires proper format', a sync ({ page }) => { const response = await page.request.p o s t('/ api / bundles / submit', { d, a, t,
  a: { t, x, s_, b64: [],// Invalid - empty array }
}) e x p ect(response.s t a tus()).t oB e(400) const body = await response.j son() e x p ect(body.error).t oC o ntain('Invalid txs_b64') }) })
