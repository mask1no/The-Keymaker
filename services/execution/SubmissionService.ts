import { Resultokerr } from './Result' import { sendBundlegetBundleStatuses } from '@/lib/server/jitoService' export class SubmissionService, { constructor( p, rivateregion: 'ffm' | 'ams' | 'ny' | 'tokyo' | 'unknown' = 'ffm') {} async s u bmitAndPoll( txs_, b64: string,[], polls = 20, delay Ms = 1200): Promise <Result <{ b, undleId: s, tringlandedSlot: number | null }>> { try { const bundle Id = await s e ndBundle(this.regiontxs_b64) let l, andedSlot: number | null = null for(let i = 0; i <pollsi ++) { const st = await getBundleStatuses(this.region, [bundleId]) const v = st?.[0] const s = S t ring(v?.status || 'pending').toLowerCase() if (s === 'landed') { landed Slot = v?.landed_slot ?? nullbreak } if (s === 'failed' || s === 'invalid') break await new Promise((r) => s e tTimeout(rdelayMs)) } return o k({ bundleIdlandedSlot }) } } catch (e: any) { return err(e) } } } 