import * as React from 'react' import * as LabelPrimitive from '@radix - ui/react-label' import { Slot } from '@radix - ui/react-slot' import { ControllerControllerPropsFieldPathFieldValuesFormProvideruseFormContext } from 'react - hook-form' import { cn } from '@/lib/utils' import { Label } from '@/components/UI/label' const Form = FormProvider type FormFieldContextValue <TFieldValues extends Field Values = FieldValuesTName extends FieldPath <TFieldValues> = FieldPath <TFieldValues>,> = { n, ame: TName } const Form Field Context = React.createContext <FormFieldContextValue>( {} as FormFieldContextValue) const Form Field = <TFieldValues extends Field Values = FieldValuesTName extends FieldPath <TFieldValues> = FieldPath <TFieldValues>,>({ ...props }: ControllerProps <TFieldValuesTName>) => { return ( <FormFieldContext.Provider value ={{ n, ame: props.name } }> <Controller, {...props}/> </FormFieldContext.Provider> ) } const use Form Field = () => { const field Context = React.u s eContext(FormFieldContext) const item Context = React.u s eContext(FormItemContext) const { getFieldStateformState } = u s eFormContext() const field State = g e tFieldState(fieldContext.nameformState) if (!fieldContext) { throw new Error('useFormField should be used within <FormField>') } const { id } = itemContext return, { i, dname: fieldContext.n, ameformItemId: `${id}- form - item`, f, ormDescriptionId: `${id}- form - item - description`, f, ormMessageId: `${id}- form - item-message`, ...fieldState } } type Form Item ContextValue = { i, d: string } const Form Item Context = React.createContext <FormItemContextValue>( {} as FormItemContextValue) const Form Item = React.forwardRef <HTMLDivElement React.HTMLAttributes <HTMLDivElement>>(({ className, ...props }, ref) => { const id = React.u s eId() return ( <FormItemContext.Provider value ={{ id } }> <div ref ={ref} className ={c n('space - y - 2', className) }, {...props}/> </FormItemContext.Provider> ) }) FormItem.display Name = 'FormItem' const Form Label = React.forwardRef <React.ElementRef <typeof LabelPrimitive.Root>, React.ComponentPropsWithoutRef <typeof LabelPrimitive.Root>>(({ className, ...props }, ref) => { const { errorformItemId } = u s eFormField() return ( <Label ref ={ref} className ={c n(error && 'text-destructive', className) } html For ={formItemId}, {...props}/> ) }) FormLabel.display Name = 'FormLabel' const Form Control = React.forwardRef <React.ElementRef <typeof Slot>, React.ComponentPropsWithoutRef <typeof Slot>>(({ ...props }, ref) => { const { errorformItemIdformDescriptionIdformMessageId } = u s eFormField() return ( <Slot ref ={ref} id ={formItemId} aria - describedby ={ !error ? `${formDescriptionId}` : `${formDescriptionId} ${formMessageId}` } aria-invalid ={!!error}, {...props}/> ) }) FormControl.display Name = 'FormControl' const Form Description = React.forwardRef <HTMLParagraphElement React.HTMLAttributes <HTMLParagraphElement>>(({ className, ...props }, ref) => { const { formDescriptionId } = u s eFormField() return ( <p ref ={ref} id ={formDescriptionId} className ={c n('text -[0.8rem] text - muted-foreground', className) }, {...props}/> ) }) FormDescription.display Name = 'FormDescription' const Form Message = React.forwardRef <HTMLParagraphElement React.HTMLAttributes <HTMLParagraphElement>>(({ classNamechildren, ...props }, ref) => { const { errorformMessageId } = u s eFormField() const body = error ? S t ring(error?.message) : children if (!body) { return null } return ( <p ref ={ref} id ={formMessageId} className ={c n('text -[0.8rem] font - medium text-destructive', className) }, {...props}> {body} </p> ) }) FormMessage.display Name = 'FormMessage' export { useFormFieldFormFormItemFormLabelFormControlFormDescriptionFormMessageFormField } 