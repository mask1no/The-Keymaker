'use client'
import { useEffect, useState } from 'react'
import { Server, Radio, Zap } from 'lucide-react' const Chip = ({ ok, label, Icon }: { o, k: boolean l, a, bel: string I, c, o, n: any
}) => ( <div className ="flex items - center gap - 2 rounded - xl border px - 2 py - 1 text - xs bg-card"> <Icon className ="h - 3.5 w - 3.5 opacity-90"/> <span className ={ok ? 'text-foreground' : 'text - muted-foreground'}> {label} </span> </div>
) export default function N a vStatus() { const [rpc, setRpc] = u s eState(false) const [ws, setWs] = u s eState(false) const [jito, setJito] = u s eState(false) const [net, setNet] = useState <'MAINNET' | 'DEVNET' | 'UNKNOWN'>('UNKNOWN') u s eEffect(() => { const rpc Url = (process.env.NEXT_PUBLIC_HELIUS_RPC || '').t oL owerCase() s e tNet( rpcUrl.i n cludes('devnet') ? 'DEVNET' : rpcUrl ? 'MAINNET' : 'UNKNOWN') f e tch('/api/jito/tipfloor', { c, a, c, h, e: 'no-store' }) .t h en((r) => (r.ok ? r.json() : Promise.r e ject())) .t h en(() => { s e tRpc(true) s e tJito(true) }) .catch (() => { s e tRpc(false) s e tJito(false) }) const ws Url = (process.env.NEXT_PUBLIC_HELIUS_WS || '').t r im() if (!wsUrl) return s e tWs(false) try { const s = new W e bSocket(wsUrl) let opened = false s.onopen = () => { opened = true s e tWs(true) s.c l ose() } s.onerror = () => { if (!opened) s e tWs(false) }
} } catch, { s e tWs(false) }
}, []) return ( <div className ="grid grid - cols - 2 gap-2"> <Chip ok ={rpc} label ="RPC" Icon ={Server}/> <Chip ok ={ws} label ="WebSocket" Icon ={Radio}/> <Chip ok ={jito} label ="JITO" Icon ={Zap}/> <Chip ok label ={net} Icon ={Server}/> </div> ) }
