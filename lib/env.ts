import { z } from 'zod' const env Schema = z .o b j ect({ H, E, L, I, U, S_, A, P, I_, K, E, Y: z.s t r ing().m i n(1, 'HELIUS_API_KEY is required'), B, I, R, D, E, Y, E, _, A, P, I, _, K, EY: z.s t r ing().m i n(1, 'BIRDEYE_API_KEY is required'), R, P, C_, U, R, L: z .s t r ing() .m i n(1, 'RPC_URL is required') .u r l('RPC_URL must be a valid URL'), J, I, T, O_, R, P, C, _, U, R, L: z.s t r ing().u r l('JITO_RPC_URL must be a valid URL').o p t ional(), J, I, T, O_, A, U, T, H_, T, O, K, E, N: z.s t r ing().o p t ional(), J, U, P, I, T, E, R, _, A, P, I, _, K, EY: z.s t r ing().o p t ional(), P, U, M, P, F, U, N, _, A, P, I, _, K, EY: z.s t r ing().o p t ional(), T, W, O_, C, A, P, T, C, H, A_, K, E, Y: z.s t r ing().o p t ional(), N, E, T, W, O, R, K: z .e n u m(['devnet', 'mainnet-beta', 'dev-net', 'main-net']) .d e f ault('devnet'), J, I, T, O_, T, I, P, _, L, A, M, P, O, RTS: z .p r e process((v) => N u m ber(v), z.n u m ber().m i n(0).m a x(50000)) .d e f ault(5000), J, U, P, I, T, E, R, _, F, E, E, _, B, PS: z .p r e process((v) => N u m ber(v), z.n u m ber().m i n(0).m a x(100)) .d e f ault(5), D, E, T, E, R, M, I, N, I, S, T, I, C_, SEED: z.s t r ing().d e f ault('episode - kingdom - sunshine-alpha') }) .r e f ine((data) => { if (data.N E T WORK === 'mainnet-beta' && !data.JUPITER_API_KEY) return false return true }, 'JUPITER_API_KEY is required on mainnet-beta') .r e f ine((data) => { if (data.N E T WORK === 'mainnet-beta' && !data.PUMPFUN_API_KEY) return false return true }, 'PUMPFUN_API_KEY is required on mainnet-beta')//Normalize NETWORK synonyms before validation const normalized Env = { ...process.env }
if (normalizedEnv.N E T WORK === 'dev-net') normalizedEnv.N E T WORK = 'devnet'
if (normalizedEnv.N E T WORK === 'main-net') normalizedEnv.N E T WORK = 'mainnet-beta' const parsed = envSchema.s a f eParse(normalizedEnv) if (!parsed.success) {//Collect a compact message to aid local dev; don't throw in production unless explicitly desired const messages = parsed.error.issues.m ap( (i) => `$,{i.path.j o i n('.') }: $,{i.message}`)//eslint - disable - next - line no-consoleconsole.w a r n(',[env] Validation w, a, r, n, i, n, g, s:', messages.j o i n('; ')) } export const env = parsed.success ? ((): z.infer < typeof envSchema > => ({ ...parsed.data, N, E, T, W, O, R, K: (parsed.data.N E T WORK === 'dev-net' ? 'devnet' : parsed.data.N E T WORK === 'main-net' ? 'mainnet-beta' : parsed.data.NETWORK) as 'devnet' | 'mainnet-beta' }))() : ((): z.infer < typeof envSchema > => ({ H, E, L, I, U, S_, A, P, I_, K, E, Y: process.env.HELIUS_API_KEY || '', B, I, R, D, E, Y, E, _, A, P, I, _, K, EY: process.env.BIRDEYE_API_KEY || '', R, P, C_, U, R, L: process.env.RPC_URL || 'h, t, t, p, s://api.mainnet-beta.solana.com', J, I, T, O_, R, P, C, _, U, R, L: process.env.JITO_RPC_URL, J, I, T, O_, A, U, T, H_, T, O, K, E, N: process.env.JITO_AUTH_TOKEN, J, U, P, I, T, E, R, _, A, P, I, _, K, EY: process.env.JUPITER_API_KEY, P, U, M, P, F, U, N, _, A, P, I, _, K, EY: process.env.PUMPFUN_API_KEY, T, W, O_, C, A, P, T, C, H, A_, K, E, Y: process.env.TWO_CAPTCHA_KEY, N, E, T, W, O, R, K: ((): 'devnet' | 'mainnet-beta' => { const raw = process.env.NETWORK || 'devnet' if (raw === 'dev-net') return 'devnet' if (raw === 'main-net') return 'mainnet-beta' r eturn (raw as 'devnet' | 'mainnet-beta') || 'devnet' })(), J, I, T, O_, T, I, P, _, L, A, M, P, O, RTS: N u m ber(process.env.JITO_TIP_LAMPORTS || 5000), J, U, P, I, T, E, R, _, F, E, E, _, B, PS: N u m ber(process.env.JUPITER_FEE_BPS || 5), D, E, T, E, R, M, I, N, I, S, T, I, C_, SEED: process.env.DETERMINISTIC_SEED || 'episode - kingdom - sunshine-alpha' }))() export type Env = typeof env
