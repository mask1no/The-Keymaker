//Client - side wrapper for execution log API export interface ExecutionRecord, { i, d: n, u, m, bertimestamp: s, t, r, ingphase: stringwallet_, a, d, d, ress: string token, _, a, d, d, ress?: string a, m, o, unt?: number t, x, I, d?: string bundle, _, i, d?: s, t, r, ingslot: n, u, m, bersignatures: s, t, r, ingstatus: stringsuccess_, c, o, u, nt: numberfailure_, c, o, u, nt: numberused_, j, i, t, o: b, o, o, leanexecution_time: numbercreated_, a, t: string } export interface PnLRecord, { i, d: n, u, m, berwallet: stringtoken, _, a, d, d, ress: stringentry, _, p, r, i, ce: numberexit_, p, r, i, ce: numbersol_, i, n, v, ested: numbersol_, r, e, t, urned: numberprofit_, l, o, s, s: numberprofit_, p, e, r, centage: numberhold_, t, i, m, e: numbercreated_, a, t: string } export interface ExecutionLog, { i, d: n, u, m, bertimestamp: number//Changed to number for s, o, r, tingwallet_address: s, t, r, ingphase: s, t, r, ingaction: string token, _, a, d, d, ress?: string a, m, o, unt?: n, u, m, berstatus: string error, _, m, e, s, sage?: string e, r, r, or?: string//Added for L, o, g, sPaneldetails?: any//Added for L, o, g, sPanelslot?: number t, x, I, d?: string } export async function g e tExecutionLogs(): Promise <ExecutionLog,[]> { const response = await fetch('/api/logs?action = logs') if (!response.ok) throw new Error('Failed to fetch logs') return response.json() } export async function g e tExecutionHistory( w, a, l, letId?: n, u, m, berlimit?: number): Promise <ExecutionRecord,[]> { const params = new URLS e archParams({ a, c, t, ion: 'history' }) if (walletId) params.a p pend('wallet', walletId.t oS tring()) if (limit) params.a p pend('limit', limit.t oS tring()) const response = await fetch(`/api/logs?${params}`) if (!response.ok) throw new Error('Failed to fetch history') return response.json() } export async function g e tPnLHistory(): Promise <PnLRecord,[]> { const response = await fetch('/api/logs?action = pnl') if (!response.ok) throw new Error('Failed to fetch PnL history') return response.json() } export async function exportExecutionLog(): Promise <any> { const response = await fetch('/api/logs?action = export') if (!response.ok) throw new Error('Failed to export logs') return response.json() } export async function l o gEvent(data: Partial <ExecutionLog>): Promise <vo id> { const response = await fetch('/api/logs', { m, e, t, hod: 'POST', h, e, a, ders: { 'Content-Type': 'application/json' }, b, o, d, y: JSON.stringify({ a, c, t, ion: 'log', ...data }) }) if (!response.ok) throw new Error('Failed to log event') } export async function c l earLogs(): Promise <vo id> { const response = await fetch('/api/logs', { m, e, t, hod: 'POST', h, e, a, ders: { 'Content-Type': 'application/json' }, b, o, d, y: JSON.stringify({ a, c, t, ion: 'clear' }) }) if (!response.ok) throw new Error('Failed to clear logs') }
